# QKChat - 基于Qt6的即时通讯系统

## 项目简介

QKChat是一个基于Qt6和C++17开发的现代化即时通讯系统，采用客户端-服务器架构设计。项目包含功能完整的聊天客户端和高性能服务器端，支持用户注册登录、好友管理、实时聊天等核心功能。

## 项目结构

```
QKChat/
├── Client/                 # 客户端项目
│   ├── main.cpp           # 应用程序入口
│   ├── Main.qml           # 主界面文件
│   ├── qml/               # QML界面组件
│   └── src/               # C++源代码
│       ├── auth/          # 认证模块
│       ├── chat/          # 聊天模块
│       ├── models/        # 数据模型
│       └── utils/         # 工具类
└── Server/                # 服务端项目
    ├── main.cpp           # 服务器入口
    ├── mainwindow.ui      # 管理界面
    └── src/               # C++源代码
        ├── auth/          # 认证服务
        ├── chat/          # 聊天服务
        ├── network/       # 网络通信
        ├── database/      # 数据库管理
        └── utils/         # 工具模块
```

## 技术栈

### 开发环境
- **Qt版本**: Qt 6.5.3
- **编程语言**: C++17
- **构建系统**: CMake 3.16+
- **编译器**: Qt_6_5_3_MinGW_64_bit

### 客户端技术
- **UI框架**: QML + Qt Quick Controls
- **网络通信**: Qt Network (TCP)
- **本地存储**: SQLite
- **加密**: Qt Cryptographic Hash

### 服务器端技术
- **网络框架**: Qt Network (多线程TCP服务器)
- **数据库**: MySQL 8.0+
- **缓存系统**: Redis 6.0+
- **加密库**: OpenSSL 3.0+
- **并发处理**: QThreadPool

## 功能特性

### 客户端功能
- ✅ 用户注册/登录（支持用户名和邮箱）
- ✅ 邮箱验证码验证
- ✅ 好友管理（添加好友、好友请求处理）
- ✅ 实时聊天（一对一文本消息）
- ✅ 在线状态显示（在线/离线/忙碌/隐身）
- ✅ 消息状态指示（已发送/已送达/已读）
- ✅ 聊天记录查看和分页加载
- ✅ 用户搜索功能
- ✅ 消息撤回（2分钟内）
- ✅ 离线消息接收
- ✅ 主题切换（浅色/深色）
- ✅ 自动登录和记住密码

### 服务器端功能
- ✅ 高并发架构（支持10,000+并发连接）
- ✅ 多线程消息处理
- ✅ 数据库连接池（10-50个连接）
- ✅ 异步消息队列（50,000消息缓冲）
- ✅ 认证缓存系统（80%+缓存命中率）
- ✅ 用户认证和会话管理
- ✅ 9位数字用户ID生成
- ✅ 邮件服务（验证码发送）
- ✅ 好友关系管理
- ✅ 实时消息路由
- ✅ 心跳检测和连接监控
- ✅ SSL/TLS加密支持
- ✅ 完整的日志系统

## 数据库设计

### MySQL表结构
- `users` - 用户基本信息
- `friendships` - 好友关系管理
- `messages` - 聊天消息存储
- `user_online_status` - 用户在线状态
- `offline_message_queue` - 离线消息队列
- `friend_request_notifications` - 好友请求通知
- `chat_sessions` - 聊天会话管理

### Redis缓存
- 用户会话令牌缓存
- 邮箱验证码缓存
- 用户在线状态缓存
- 认证信息缓存

## 性能特点

- **高并发**: 支持10,000+同时在线用户
- **低延迟**: 消息传输延迟<100ms
- **高可用**: 数据库连接池和缓存机制
- **内存优化**: 智能内存管理和资源回收
- **线程安全**: 完整的多线程安全保护

## 安全特性

- 密码盐值哈希存储
- SSL/TLS网络加密
- 输入数据验证和过滤
- 会话令牌定期更新
- 防止SQL注入和XSS攻击

## 开发状态

**当前版本**: v0.1  
**开发状态**: 核心功能已完成，持续优化中

- ✅ 用户认证系统
- ✅ 好友管理系统
- ✅ 实时聊天功能
- ✅ 高并发架构
- 🔄 群聊功能（开发中）
- 🔄 文件传输（计划中）
- 🔄 语音通话（计划中）

## 快速开始

### 环境要求
- Qt 6.5.3+
- MySQL 8.0+
- Redis 6.0+
- OpenSSL 3.0+
- CMake 3.16+

### 编译运行

1. **编译服务器端**
   ```bash
   cd Server
   cmake -B build
   cmake --build build
   ```

2. **编译客户端**
   ```bash
   cd Client
   cmake -B build
   cmake --build build
   ```

3. **配置数据库**
   - 创建MySQL数据库
   - 启动Redis服务
   - 修改服务器配置文件

4. **启动应用**
   - 先启动服务器端
   - 再启动客户端

## 项目特色

- **现代化架构**: 采用Qt6最新特性和C++17标准
- **高性能设计**: 多线程+连接池+缓存的高并发架构
- **用户体验**: 简洁美观的QML界面和流畅的交互
- **代码质量**: 严格的编码规范和完善的错误处理
- **可扩展性**: 模块化设计，易于功能扩展

---

*QKChat - 让沟通更简单*