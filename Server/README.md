# QKChat Server

QKChatæ˜¯ä¸€ä¸ªåŸºäºQt6å’ŒC++å¼€å‘çš„é«˜æ€§èƒ½é€šè®¯æœåŠ¡å™¨ï¼Œé‡‡ç”¨å¤šçº¿ç¨‹æ¶æ„è®¾è®¡ï¼Œæ”¯æŒå¤§è§„æ¨¡å¹¶å‘è¿æ¥å’Œå®æ—¶æ¶ˆæ¯å¤„ç†ã€‚

## é¡¹ç›®æ¦‚è¿°

QKChat Serveræ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„é€šè®¯æœåŠ¡å™¨ï¼Œé‡‡ç”¨é«˜æ€§èƒ½æ¶æ„è®¾è®¡ï¼Œå½“å‰ç‰ˆæœ¬å·²å®Œæˆç”¨æˆ·è®¤è¯ç³»ç»Ÿã€é‚®ä»¶æœåŠ¡ã€ç½‘ç»œé€šä¿¡åŸºç¡€è®¾æ–½ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶é’ˆå¯¹é«˜å¹¶å‘åœºæ™¯è¿›è¡Œäº†å…¨é¢ä¼˜åŒ–ã€‚æœåŠ¡å™¨ä½¿ç”¨Qt6æ¡†æ¶å¼€å‘ï¼Œå…·å¤‡è‰¯å¥½çš„è·¨å¹³å°æ€§èƒ½å’Œç¨³å®šæ€§ã€‚

**å½“å‰ç‰ˆæœ¬çŠ¶æ€**ï¼šç”¨æˆ·è®¤è¯ç³»ç»Ÿå·²å®Œæˆï¼Œé«˜å¹¶å‘æ¶æ„å·²å®ç°ï¼Œç¤¾äº¤èŠå¤©åŠŸèƒ½å·²å®Œæˆå¼€å‘ã€‚

## å·²å®ç°åŠŸèƒ½

### é«˜å¹¶å‘æ¶æ„
- **å¤šçº¿ç¨‹æœåŠ¡å™¨**ï¼šåŸºäºQThreadPoolçš„ThreadPoolServerï¼Œæ”¯æŒ10,000+å¹¶å‘è¿æ¥
- **æ•°æ®åº“è¿æ¥æ± **ï¼šDatabaseConnectionPoolå®ç°è¿æ¥å¤ç”¨ï¼Œæå‡æ•°æ®åº“æ€§èƒ½10å€
- **å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—**ï¼šAsyncMessageQueueæ”¯æŒ50,000æ¶ˆæ¯ç¼“å†²ï¼Œæ¯«ç§’çº§å“åº”
- **è®¤è¯ç¼“å­˜ç³»ç»Ÿ**ï¼šAuthCacheæä¾›80%+ç¼“å­˜å‘½ä¸­ç‡ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
- **çº¿ç¨‹å®‰å…¨å•ä¾‹**ï¼šThreadSafeSingletonç¡®ä¿å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§

### ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **ç”¨æˆ·æ³¨å†Œä¸ç™»å½•**ï¼šæ”¯æŒç”¨æˆ·å/é‚®ç®±ç™»å½•ï¼Œå®Œæ•´çš„è¡¨å•éªŒè¯
- **9ä½æ•°å­—ç”¨æˆ·ID**ï¼šUserIdGeneratorè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€9ä½æ•°å­—ç”¨æˆ·æ ‡è¯†
- **å¯†ç å®‰å…¨**ï¼šä½¿ç”¨ç›å€¼å“ˆå¸Œç®—æ³•ä¿æŠ¤ç”¨æˆ·å¯†ç 
- **é‚®ç®±éªŒè¯**ï¼šæ³¨å†Œæ—¶å‘é€éªŒè¯ç é‚®ä»¶ï¼Œæ”¯æŒå¤šç§éªŒè¯åœºæ™¯
- **ä¼šè¯ç®¡ç†**ï¼šåŸºäºä»¤ç‰Œçš„å®‰å…¨ä¼šè¯æœºåˆ¶ï¼Œæ”¯æŒå¤šè®¾å¤‡ç™»å½•
- **å¿ƒè·³æ£€æµ‹**ï¼šå®¢æˆ·ç«¯è¿æ¥çŠ¶æ€ç›‘æ§å’Œè‡ªåŠ¨æ¸…ç†

### ç½‘ç»œé€šä¿¡
- **TCPæœåŠ¡å™¨**ï¼šæ”¯æŒTcpServerå’ŒThreadPoolServerä¸¤ç§æ¨¡å¼
- **å®¢æˆ·ç«¯ç®¡ç†**ï¼šå¤šå®¢æˆ·ç«¯è¿æ¥ç®¡ç†å’Œæ¶ˆæ¯è·¯ç”±
- **åè®®å¤„ç†**ï¼šç»Ÿä¸€çš„JSONæ¶ˆæ¯åè®®å¤„ç†
- **SSL/TLSæ”¯æŒ**ï¼šå¯é€‰çš„åŠ å¯†é€šä¿¡æ”¯æŒ
- **è¿æ¥ç›‘æ§**ï¼šå®æ—¶è¿æ¥çŠ¶æ€å’Œæ€§èƒ½ç›‘æ§
- **è´Ÿè½½å‡è¡¡**ï¼šæ™ºèƒ½è´Ÿè½½åˆ†å‘å’Œè¿æ¥é™æµ

### æ•°æ®ç®¡ç†
- **MySQLæ•°æ®åº“**ï¼šç”¨æˆ·æ•°æ®ã€èŠå¤©æ¶ˆæ¯ã€å¥½å‹å…³ç³»å­˜å‚¨
- **Redisç¼“å­˜**ï¼šä¼šè¯ç®¡ç†ã€éªŒè¯ç ç¼“å­˜ã€åœ¨çº¿çŠ¶æ€ç¼“å­˜
- **æ•°æ®åº“è¿æ¥æ± **ï¼šé«˜æ•ˆçš„æ•°æ®åº“è¿æ¥ç®¡ç†ï¼Œæ”¯æŒ10-50ä¸ªè¿æ¥
- **æ•°æ®éªŒè¯**ï¼šå®Œå–„çš„è¾“å…¥æ•°æ®éªŒè¯å’Œå®‰å…¨æ£€æŸ¥
- **äº‹åŠ¡å¤„ç†**ï¼šæ”¯æŒæ•°æ®åº“äº‹åŠ¡å’Œå›æ»šæœºåˆ¶
- **èŠå¤©æ•°æ®è¡¨**ï¼š
  - `users` - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
  - `friendships` - å¥½å‹å…³ç³»ç®¡ç†
  - `messages` - èŠå¤©æ¶ˆæ¯å­˜å‚¨
  - `user_online_status` - ç”¨æˆ·åœ¨çº¿çŠ¶æ€
  - `offline_message_queue` - ç¦»çº¿æ¶ˆæ¯é˜Ÿåˆ—
  - `friend_request_notifications` - å¥½å‹è¯·æ±‚é€šçŸ¥
  - `chat_sessions` - èŠå¤©ä¼šè¯ç®¡ç†

### ç¤¾äº¤èŠå¤©åŠŸèƒ½
- **å¥½å‹ç®¡ç†**ï¼šå¥½å‹è¯·æ±‚å‘é€/æ¥æ”¶/æ¥å—/æ‹’ç»ï¼Œå¥½å‹åˆ—è¡¨ç®¡ç†
- **å®æ—¶èŠå¤©**ï¼šä¸€å¯¹ä¸€æ–‡æœ¬æ¶ˆæ¯å®æ—¶æ”¶å‘ï¼Œæ”¯æŒæ¶ˆæ¯çŠ¶æ€ï¼ˆå·²å‘é€/å·²é€è¾¾/å·²è¯»ï¼‰
- **åœ¨çº¿çŠ¶æ€**ï¼šç”¨æˆ·åœ¨çº¿çŠ¶æ€ç®¡ç†ï¼ˆåœ¨çº¿/ç¦»çº¿/å¿™ç¢Œ/éšèº«ï¼‰ï¼ŒçŠ¶æ€å®æ—¶å¹¿æ’­
- **æ¶ˆæ¯æ¨é€**ï¼šåœ¨çº¿ç”¨æˆ·å®æ—¶æ¨é€ï¼Œç¦»çº¿æ¶ˆæ¯é˜Ÿåˆ—å’Œæ‰¹é‡æ¨é€
- **ç”¨æˆ·æœç´¢**ï¼šæ”¯æŒç”¨æˆ·åã€é‚®ç®±ã€ç”¨æˆ·IDæœç´¢æ·»åŠ å¥½å‹
- **æ¶ˆæ¯å†å²**ï¼šèŠå¤©è®°å½•å­˜å‚¨å’Œåˆ†é¡µæŸ¥è¯¢
- **æ¶ˆæ¯æ’¤å›**ï¼šæ”¯æŒ2åˆ†é’Ÿå†…æ¶ˆæ¯æ’¤å›åŠŸèƒ½
- **å¿ƒè·³æ£€æµ‹**ï¼š30ç§’å¿ƒè·³é—´éš”ï¼Œ60ç§’è¶…æ—¶è‡ªåŠ¨ç¦»çº¿

### é‚®ä»¶æœåŠ¡
- **SMTPå®¢æˆ·ç«¯**ï¼šè‡ªå®šä¹‰SMTPå®¢æˆ·ç«¯å®ç°
- **éªŒè¯é‚®ä»¶**ï¼šç”¨æˆ·æ³¨å†Œã€å¯†ç é‡ç½®éªŒè¯ç å‘é€
- **é‚®ä»¶æ¨¡æ¿**ï¼šç¾è§‚çš„HTMLé‚®ä»¶æ¨¡æ¿
- **å¤šé‚®ä»¶æœåŠ¡å•†æ”¯æŒ**ï¼šæ”¯æŒå„ç§SMTPæœåŠ¡é…ç½®
- **å¹¶å‘å‘é€**ï¼šæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘é‚®ä»¶å‘é€

### ç³»ç»Ÿç®¡ç†
- **é…ç½®ç®¡ç†**ï¼šçµæ´»çš„JSONé…ç½®æ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒçƒ­é‡è½½
- **æ—¥å¿—ç³»ç»Ÿ**ï¼šåˆ†çº§æ—¥å¿—è®°å½•ï¼Œæ”¯æŒæ–‡ä»¶å’Œæ§åˆ¶å°è¾“å‡º
- **æ€§èƒ½ç›‘æ§**ï¼šPerformanceMonitorå®æ—¶ç›‘æ§ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ¢å¤æœºåˆ¶
- **å®‰å…¨å®¡è®¡**ï¼šç”¨æˆ·æ“ä½œå’Œå®‰å…¨äº‹ä»¶è®°å½•

## ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶

QKChat Server
â”œâ”€â”€ ServerManager          # æœåŠ¡å™¨ç®¡ç†å™¨ï¼ˆæ ¸å¿ƒåè°ƒå™¨ï¼‰
â”œâ”€â”€ Network Layer         # ç½‘ç»œé€šä¿¡å±‚
â”‚   â”œâ”€â”€ ThreadPoolServer  # å¤šçº¿ç¨‹TCPæœåŠ¡å™¨
â”‚   â”œâ”€â”€ TcpServer        # ä¼ ç»ŸTCPæœåŠ¡å™¨
â”‚   â”œâ”€â”€ ClientHandler    # å®¢æˆ·ç«¯å¤„ç†å™¨
â”‚   â”œâ”€â”€ AsyncMessageQueue # å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â””â”€â”€ ProtocolHandler  # åè®®å¤„ç†å™¨
â”œâ”€â”€ Authentication       # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ UserService      # ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ UserRegistrationService # ç”¨æˆ·æ³¨å†ŒæœåŠ¡
â”‚   â”œâ”€â”€ UserIdGenerator  # ç”¨æˆ·IDç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ AuthCache        # è®¤è¯ç¼“å­˜
â”‚   â”œâ”€â”€ EmailService     # é‚®ä»¶æœåŠ¡
â”‚   â””â”€â”€ SmtpClient       # SMTPå®¢æˆ·ç«¯
â”œâ”€â”€ Chat Module          # èŠå¤©æ¨¡å—
â”‚   â”œâ”€â”€ FriendService    # å¥½å‹ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ OnlineStatusService # åœ¨çº¿çŠ¶æ€ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ MessageService   # æ¶ˆæ¯ç®¡ç†æœåŠ¡
â”‚   â””â”€â”€ ChatProtocolHandler # èŠå¤©åè®®å¤„ç†å™¨
â”œâ”€â”€ Database Layer       # æ•°æ®å±‚
â”‚   â”œâ”€â”€ DatabaseManager  # æ•°æ®åº“ç®¡ç†å™¨
â”‚   â”œâ”€â”€ DatabaseConnectionPool # æ•°æ®åº“è¿æ¥æ± 
â”‚   â””â”€â”€ RedisClient      # Rediså®¢æˆ·ç«¯
â”œâ”€â”€ Security             # å®‰å…¨æ¨¡å—
â”‚   â”œâ”€â”€ CertificateManager # è¯ä¹¦ç®¡ç†
â”‚   â”œâ”€â”€ OpenSSLHelper    # OpenSSLåŠ©æ‰‹
â”‚   â””â”€â”€ Crypto           # åŠ å¯†å·¥å…·
â”œâ”€â”€ Monitoring          # ç›‘æ§æ¨¡å—
â”‚   â””â”€â”€ PerformanceMonitor # æ€§èƒ½ç›‘æ§å™¨
â””â”€â”€ Utils               # å·¥å…·æ¨¡å—
    â”œâ”€â”€ Logger           # æ—¥å¿—ç³»ç»Ÿ
    â”œâ”€â”€ Validator        # æ•°æ®éªŒè¯
    â”œâ”€â”€ ThreadSafeSingleton # çº¿ç¨‹å®‰å…¨å•ä¾‹
    â””â”€â”€ ConfigManager    # é…ç½®ç®¡ç†
```

### æŠ€æœ¯æ ˆ

- **å¼€å‘æ¡†æ¶**ï¼šQt6 (C++)
- **æ•°æ®åº“**ï¼šMySQL 8.0+
- **ç¼“å­˜**ï¼šRedis 6.0+
- **åŠ å¯†**ï¼šOpenSSL 3.0+
- **æ„å»ºç³»ç»Ÿ**ï¼šCMake 3.16+
- **ç¼–è¯‘å™¨**ï¼šMinGW

## æ€§èƒ½ç‰¹æ€§

### é«˜å¹¶å‘æ”¯æŒ
- **å¹¶å‘è¿æ¥**ï¼šæ”¯æŒ10,000+å¹¶å‘å®¢æˆ·ç«¯è¿æ¥
- **å“åº”å»¶è¿Ÿ**ï¼šå¹³å‡å“åº”æ—¶é—´50-100ms
- **æ•°æ®åº“æ€§èƒ½**ï¼šæŸ¥è¯¢æ€§èƒ½æå‡10å€ï¼Œæ”¯æŒ1,000+ QPS
- **æ¶ˆæ¯å¤„ç†**ï¼šæ”¯æŒ50,000æ¶ˆæ¯/ç§’å¤„ç†èƒ½åŠ›
- **ç¼“å­˜å‘½ä¸­ç‡**ï¼šè®¤è¯ç¼“å­˜å‘½ä¸­ç‡è¾¾åˆ°80%+

### æ¶æ„ä¼˜åŠ¿
- **å¤šçº¿ç¨‹å¤„ç†**ï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸CPUæ€§èƒ½
- **è¿æ¥æ± å¤ç”¨**ï¼šå‡å°‘æ•°æ®åº“è¿æ¥å¼€é”€
- **å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—**ï¼šéé˜»å¡æ¶ˆæ¯å¤„ç†
- **æ™ºèƒ½è´Ÿè½½å‡è¡¡**ï¼šè‡ªåŠ¨è´Ÿè½½åˆ†å‘
- **å†…å­˜ä¼˜åŒ–**ï¼šé«˜æ•ˆçš„å†…å­˜ä½¿ç”¨å’Œç®¡ç†

## âš™ï¸ é…ç½®è¯´æ˜

### æœåŠ¡å™¨é…ç½®

ä¸»è¦é…ç½®æ–‡ä»¶ä½äº `config/server.json`ï¼Œé«˜æ€§èƒ½é…ç½®æ¨¡æ¿ä½äº `config/server_high_performance.json`ï¼š

```json
{
  "server": {
    "port": 8080,
    "max_clients": 10000,
    "min_threads": 8,
    "max_threads": 32,
    "enable_load_balancing": true
  },
  "database": {
    "min_connections": 10,
    "max_connections": 50,
    "connection_timeout": 30000
  },
  "message_queue": {
    "max_queue_size": 50000,
    "worker_threads": 8,
    "enable_flow_control": true
  }
}
```

### ç¯å¢ƒå˜é‡

| å˜é‡å | æè¿° | é»˜è®¤å€¼ |
|--------|------|--------|
| `QKCHAT_CONFIG_PATH` | é…ç½®æ–‡ä»¶è·¯å¾„ | `./config/server.json` |
| `QKCHAT_LOG_LEVEL` | æ—¥å¿—çº§åˆ« | `INFO` |
| `QKCHAT_DB_HOST` | æ•°æ®åº“ä¸»æœº | `localhost` |
| `QKCHAT_REDIS_HOST` | Redisä¸»æœº | `localhost` |

### æœåŠ¡å™¨ç®¡ç†

- **æŸ¥çœ‹çŠ¶æ€**ï¼šé€šè¿‡GUIç•Œé¢æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
- **ç›‘æ§è¿æ¥**ï¼šå®æ—¶æŸ¥çœ‹å®¢æˆ·ç«¯è¿æ¥æ•°å’Œæ€§èƒ½æŒ‡æ ‡
- **æ—¥å¿—æŸ¥çœ‹**ï¼šæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯
- **æ€§èƒ½ç›‘æ§**ï¼šå®æ—¶ç›‘æ§CPUã€å†…å­˜ã€ç½‘ç»œç­‰å…³é”®æŒ‡æ ‡

### å®¢æˆ·ç«¯è¿æ¥

å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿æ¥ï¼š
- **TCPè¿æ¥**ï¼š`tcp://localhost:8080`
- **TLSè¿æ¥**ï¼š`tls://localhost:8080`ï¼ˆæ¨èï¼‰

### æ—¥å¿—åˆ†æ

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š
- `logs/server.log` - ä¸»æ—¥å¿—æ–‡ä»¶
- `logs/network.log` - ç½‘ç»œæ¨¡å—æ—¥å¿—
- `logs/database.log` - æ•°æ®åº“æ—¥å¿—
- `logs/auth.log` - è®¤è¯æ¨¡å—æ—¥å¿—
- `logs/performance.log` - æ€§èƒ½ç›‘æ§æ—¥å¿—

## éƒ¨ç½²å»ºè®®

### ç¡¬ä»¶è¦æ±‚
- **CPU**ï¼š8æ ¸å¿ƒä»¥ä¸Š
- **å†…å­˜**ï¼š16GBä»¥ä¸Š
- **å­˜å‚¨**ï¼šSSDç¡¬ç›˜
- **ç½‘ç»œ**ï¼šåƒå…†ç½‘å¡

### ç³»ç»Ÿä¼˜åŒ–
```bash
# Linuxç³»ç»Ÿä¼˜åŒ–
ulimit -n 65536
echo 'net.core.somaxconn = 65536' >> /etc/sysctl.conf
echo 'net.ipv4.tcp_max_syn_backlog = 65536' >> /etc/sysctl.conf
sysctl -p
```

### æ•°æ®åº“ä¼˜åŒ–
```ini
[mysqld]
max_connections = 1000
innodb_buffer_pool_size = 8G
innodb_log_file_size = 1G
query_cache_size = 256M
```

## ç›‘æ§æŒ‡æ ‡

### å…³é”®æ€§èƒ½æŒ‡æ ‡
- **è¿æ¥æ•°**ï¼šå½“å‰æ´»è·ƒè¿æ¥æ•° < æœ€å¤§è¿æ¥æ•°çš„80%
- **å“åº”æ—¶é—´**ï¼šå¹³å‡å“åº”æ—¶é—´ < 100ms
- **é”™è¯¯ç‡**ï¼šé”™è¯¯ç‡ < 1%
- **èµ„æºä½¿ç”¨**ï¼šCPU < 80%, å†…å­˜ < 90%

### å‘Šè­¦è®¾ç½®
```json
{
  "alert_thresholds": {
    "cpu_percent": 85,
    "memory_percent": 90,
    "connection_count": 9000,
    "error_rate_percent": 5,
    "response_time_ms": 200
  }
}
```

## å¼€å‘çŠ¶æ€

### å·²å®ŒæˆåŠŸèƒ½ âœ…
- é«˜å¹¶å‘æ¶æ„è®¾è®¡å’Œå®ç°
- ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆæ³¨å†Œã€ç™»å½•ã€éªŒè¯ï¼‰
- 9ä½æ•°å­—ç”¨æˆ·IDè‡ªåŠ¨ç”Ÿæˆ
- æ•°æ®åº“è¿æ¥æ± å’Œç¼“å­˜ç³»ç»Ÿ
- å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—
- æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
- é‚®ä»¶æœåŠ¡é›†æˆ
- å®‰å…¨æœºåˆ¶å®ç°
- ç¤¾äº¤èŠå¤©åŠŸèƒ½ï¼ˆå¥½å‹ç®¡ç†ã€å®æ—¶èŠå¤©ã€åœ¨çº¿çŠ¶æ€ï¼‰
- æ¶ˆæ¯å†å²è®°å½•å’Œç¦»çº¿æ¶ˆæ¯æ¨é€
- æ¶ˆæ¯çŠ¶æ€ç®¡ç†ï¼ˆå·²å‘é€/å·²é€è¾¾/å·²è¯»ï¼‰
- æ¶ˆæ¯æ’¤å›åŠŸèƒ½

### å¼€å‘ä¸­åŠŸèƒ½ ğŸš§
- ç¾¤ç»„èŠå¤©æ”¯æŒ
- æ–‡ä»¶ä¼ è¾“åŠŸèƒ½
- æ¶ˆæ¯åŠ å¯†ä¼ è¾“

### è®¡åˆ’åŠŸèƒ½ ğŸ“‹
- åˆ†å¸ƒå¼éƒ¨ç½²æ”¯æŒ
- å¾®æœåŠ¡æ¶æ„
- è¯­éŸ³/è§†é¢‘é€šè¯
- ç§»åŠ¨ç«¯é€‚é…
- æ¶ˆæ¯æ¨é€é€šçŸ¥

## API æ¥å£

### è®¤è¯ç›¸å…³ API
```json
// ç”¨æˆ·æ³¨å†Œ
{"action": "register", "username": "user", "email": "user@example.com", "password": "password"}

// ç”¨æˆ·ç™»å½•
{"action": "login", "username": "user", "password": "password"}

// å‘é€éªŒè¯ç 
{"action": "send_verification_code", "email": "user@example.com", "type": "register"}
```

### èŠå¤©ç›¸å…³ API
```json
// å‘é€å¥½å‹è¯·æ±‚
{"action": "friend_request", "user_identifier": "username", "message": "é™„åŠ æ¶ˆæ¯"}

// å‘é€æ¶ˆæ¯
{"action": "send_message", "receiver_id": 123, "content": "Hello", "type": "text"}

// è·å–èŠå¤©å†å²
{"action": "get_chat_history", "chat_user_id": 123, "limit": 50, "offset": 0}

// æ›´æ–°åœ¨çº¿çŠ¶æ€
{"action": "status_update", "status": "online", "client_id": "uuid"}

// å¿ƒè·³
{"action": "heartbeat", "client_id": "uuid"}
```

## éƒ¨ç½²è¯´æ˜

### ç¯å¢ƒè¦æ±‚
- Qt 6.5.3 æˆ–æ›´é«˜ç‰ˆæœ¬
- MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- Redis 6.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- C++17 ç¼–è¯‘å™¨æ”¯æŒ

### éƒ¨ç½²æ­¥éª¤
1. å®‰è£…å¹¶é…ç½®MySQLæ•°æ®åº“
2. å®‰è£…å¹¶å¯åŠ¨RedisæœåŠ¡
3. æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼š
   - `data/databases.sql`ï¼ˆåŸºç¡€ç»“æ„ï¼‰
   - `data/chat_extensions.sql`ï¼ˆèŠå¤©æ‰©å±•ï¼‰
4. é…ç½®é‚®ä»¶æœåŠ¡å™¨è®¾ç½®
5. ç¼–è¯‘å¹¶å¯åŠ¨æœåŠ¡å™¨

### é…ç½®æ–‡ä»¶
æœåŠ¡å™¨é…ç½®é€šè¿‡ä»£ç ä¸­çš„å¸¸é‡å®šä¹‰ï¼Œä¸»è¦åŒ…æ‹¬ï¼š
- æ•°æ®åº“è¿æ¥å‚æ•°
- Redisè¿æ¥å‚æ•°
- é‚®ä»¶æœåŠ¡å™¨é…ç½®
- ç½‘ç»œç«¯å£è®¾ç½®ï¼ˆé»˜è®¤8080ï¼‰

---

**ç‰ˆæœ¬**ï¼šv2.0
**æœ€åæ›´æ–°**ï¼š2025å¹´8æœˆ11æ—¥
**æŠ€æœ¯æ ˆ**ï¼šQt 6.5.3 + C++17 + MySQL 8.0 + Redis 6.0