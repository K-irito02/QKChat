[2025-08-10 09:57:50.386][INFO]: Initializing QKChat Server... [initialize:56]
[2025-08-10 09:57:50.386][INFO]: OpenSSL library initialized successfully [initializeOpenSSL:40]
[2025-08-10 09:57:50.386][INFO]: Creating ConfigManager instance... [initialize:68]
[2025-08-10 09:57:50.386][INFO]: ConfigManager instance created successfully [initialize:72]
[2025-08-10 09:57:50.386][INFO]: Application directory: D:/QT_Learn/Projects/QKChat/Server/build/Desktop_Qt_6_5_3_MinGW_64_bit-Debug [initialize:86]
[2025-08-10 09:57:50.386][INFO]: Looking for config file at: D:/QT_Learn/Projects/QKChat/Server/build/Desktop_Qt_6_5_3_MinGW_64_bit-Debug/config/server.json [initialize:87]
[2025-08-10 09:57:50.386][INFO]: Attempting to load configuration... [initialize:119]
[2025-08-10 09:57:50.391][INFO]: Configuration loaded from: D:/QT_Learn/Projects/QKChat/Server/build/Desktop_Qt_6_5_3_MinGW_64_bit-Debug/config/server.json [loadConfig:116]
[2025-08-10 09:57:50.391][INFO]: Configuration loaded successfully [initialize:123]
[2025-08-10 09:57:50.391][INFO]: Configuring logger settings... [initialize:136]
[2025-08-10 09:57:50.391][INFO]: Logger configuration completed [initialize:143]
[2025-08-10 09:57:50.412][INFO]: Connected to MySQL database: root@localhost:3306/qkchat [initialize:82]
[2025-08-10 09:57:50.412][INFO]: Database connection established [onDatabaseConnectionChanged:355]
[2025-08-10 09:57:50.412][INFO]: Creating database tables... [createTables:301]
[2025-08-10 09:57:50.428][INFO]: Creating sessions table... [createTables:382]
[2025-08-10 09:57:50.443][INFO]: Redis connected successfully [onConnected:300]
[2025-08-10 09:57:50.443][INFO]: Redis connection established [onRedisConnectionChanged:365]
[2025-08-10 09:57:50.443][INFO]: Connected to Redis: localhost:6379 (DB: 0) [initialize:100]
[2025-08-10 09:57:50.443][INFO]: Redis connection established [onRedisConnectionChanged:365]
[2025-08-10 09:57:50.486][INFO]: Initializing EmailService with config: host=smtp.qq.com, port=465, username=saokiritoasuna00@qq.com, useTls=true [initializeEmailService:428]
[2025-08-10 09:57:50.486][INFO]: SMTP client configured: smtp.qq.com:465 (TLS: 1, STARTTLS: 0) [configure:60]
[2025-08-10 09:57:50.486][INFO]: Email service initialized: smtp.qq.com:465 (TLS: Yes) [initialize:75]
[2025-08-10 09:57:50.488][INFO]: Maximum clients set to 1000 [setMaxClients:176]
[2025-08-10 09:57:50.488][INFO]: Heartbeat interval set to 30000ms [setHeartbeatInterval:169]
[2025-08-10 09:57:50.488][INFO]: QKChat Server initialized successfully [initialize:187]
[2025-08-10 09:57:50.488][INFO]: Starting QKChat Server on port 8080... [startServer:224]
[2025-08-10 09:57:50.495][INFO]: TCP Server started on 0.0.0.0:8080 (TLS: Yes) [startServer:49]
[2025-08-10 09:57:50.495][INFO]: QKChat Server started successfully on port 8080 [startServer:239]
[2025-08-10 09:57:50.735][INFO]: Initializing TLS certificates using auto-generated self-signed certificate [initializeCertificatesAsync:475]
[2025-08-10 09:57:50.736][INFO]: Generating self-signed certificate for: localhost [generateSelfSignedCertificate:136]
[2025-08-10 09:57:50.736][INFO]: Generating RSA key pair with 2048 bits [generateRSAKeyPair:65]
[2025-08-10 09:57:51.113][INFO]: RSA key pair generated successfully [generateRSAKeyPair:107]
[2025-08-10 09:57:51.113][INFO]: Creating certificate request for: localhost [createCertificateRequest:125]
[2025-08-10 09:57:51.124][INFO]: Certificate request created successfully [createCertificateRequest:198]
[2025-08-10 09:57:51.124][INFO]: Creating self-signed certificate for: localhost [createSelfSignedCertificate:218]
[2025-08-10 09:57:51.124][INFO]: Self-signed certificate created successfully [createSelfSignedCertificate:291]
[2025-08-10 09:57:51.124][INFO]: Self-signed certificate generated successfully for: localhost [generateSelfSignedCertificate:165]
[2025-08-10 09:57:51.124][INFO]: Self-signed certificate generated successfully [initializeCertificatesAsync:481]
[2025-08-10 09:58:14.458][INFO]: Authentication successful for user: admin [authenticateUser:80]
[2025-08-10 09:58:14.461][INFO]: AUTH [LOGIN_SUCCESS] User: admin, Success: YES, IP: ::ffff:127.0.0.1
[2025-08-10 09:58:14.461][INFO]: User logged in: ID=1, Client=client_1754791085627_1 [onProtocolUserLoggedIn:340]
[2025-08-10 09:58:14.461][INFO]: User login successful: admin from ::ffff:127.0.0.1 [handleLoginRequest:95]
[2025-08-10 09:58:14.461][INFO]: Login response created for user admin: success=true, message='登录成功' [handleLoginRequest:108]
[2025-08-10 09:58:17.425][ERROR]: Socket error for client client_1754791085627_1: The remote host closed the connection [onSocketError:257]
[2025-08-10 09:58:17.425][ERROR]: Client error [client_1754791085627_1]: The remote host closed the connection [onClientError:328]
[2025-08-10 09:58:17.425][INFO]: Client disconnected: client_1754791085627_1 [onDisconnected:240]
[2025-08-10 09:58:17.425][INFO]: Client disconnected: client_1754791085627_1 (Total: 0) [onClientDisconnected:292]
[2025-08-10 09:58:17.425][INFO]: Client disconnected: client_1754791085627_1 (Total: -1) [onTcpClientDisconnected:333]
[2025-08-10 09:58:22.816][INFO]: QKChat Server shutting down [qMain:73]
[2025-08-10 09:58:22.817][INFO]: Stopping QKChat Server... [stopServer:249]
[2025-08-10 09:58:22.817][INFO]: Stopping TCP Server... [stopServer:61]
[2025-08-10 09:58:22.817][INFO]: TCP Server stopped [stopServer:77]
[2025-08-10 09:58:22.817][INFO]: Database connection closed [close:101]
[2025-08-10 09:58:22.817][WARNING]: Database connection lost [onDatabaseConnectionChanged:357]
[2025-08-10 09:58:22.817][WARNING]: Redis disconnected [onDisconnected:307]
[2025-08-10 09:58:22.817][WARNING]: Redis connection lost [onRedisConnectionChanged:367]
[2025-08-10 09:58:22.817][WARNING]: Redis connection lost [onRedisConnectionChanged:367]
[2025-08-10 09:58:22.817][INFO]: Redis connection closed [close:123]
[2025-08-10 09:58:22.817][INFO]: OpenSSL library cleaned up [cleanupOpenSSL:55]
[2025-08-10 09:58:22.817][INFO]: QKChat Server stopped [stopServer:271]
